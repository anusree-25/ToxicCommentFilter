<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram Ultra Clone + Comments</title>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root {
            --bg-gray: #fafafa;
            --border: #dbdbdb;
            --insta-blue: #0095f6;
            --text-main: #262626;
        }

        * { box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
        body { margin: 0; background: #efefef; display: flex; justify-content: center; align-items: center; height: 100vh; overflow: hidden; }

        .phone-container {
            width: 375px; height: 750px; background: #fff; border: 8px solid #262626;
            border-radius: 40px; position: relative; overflow: hidden; display: flex;
            flex-direction: column; box-shadow: 0 20px 50px rgba(0,0,0,0.3);
        }

        .hidden { display: none !important; }

        /* --- LOGIN --- */
        .login-container { position: absolute; inset: 0; background: white; z-index: 3000; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 40px; }
        .login-logo { font-size: 40px; font-weight: bold; margin-bottom: 30px; font-style: italic; }
        .input-group { width: 100%; position: relative; margin-bottom: 10px; }
        .input-group input { width: 100%; padding: 12px; background: #fafafa; border: 1px solid #dbdbdb; border-radius: 5px; }
        .login-btn { width: 100%; padding: 10px; background: var(--insta-blue); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; margin-top: 10px; }

        /* --- LAYOUT --- */
        .navbar { height: 60px; border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; padding: 0 16px; background: #fff; flex-shrink: 0; }
        .main-content { flex: 1; overflow-y: auto; background: #fff; scrollbar-width: none; }
        .main-content::-webkit-scrollbar { display: none; }
        .bottom-nav { height: 50px; border-top: 1px solid var(--border); display: flex; justify-content: space-around; align-items: center; background: white; flex-shrink: 0; }
        .bottom-nav i { cursor: pointer; color: #262626; }

        /* --- HOME FEED --- */
        .story-bar { display: flex; padding: 10px; gap: 12px; border-bottom: 1px solid var(--border); overflow-x: auto; }
        .story-ring { width: 64px; height: 64px; border-radius: 50%; padding: 2px; background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888); flex-shrink: 0; }
        .story-ring img { width: 100%; height: 100%; border-radius: 50%; border: 2px solid white; object-fit: cover; }
        .post { margin-bottom: 15px; }
        .post-header { display: flex; align-items: center; padding: 10px; gap: 10px; font-size: 14px; font-weight: 600; }
        .post-header img { width: 32px; height: 32px; border-radius: 50%; }
        .post-img { width: 100%; display: block; }
        .post-actions { display: flex; padding: 10px; gap: 16px; }
        .heart-active { color: #ed4956 !important; fill: #ed4956; }
        .post-info { padding: 0 15px; font-size: 14px; }
        .view-comments-btn { color: #8e8e8e; font-size: 14px; margin: 5px 15px; cursor: pointer; }

        /* --- COMMENT SECTION OVERLAY --- */
        .comments-overlay {
            position: absolute; bottom: 0; left: 0; right: 0; height: 75%;
            background: white; z-index: 2000; border-radius: 20px 20px 0 0;
            display: flex; flex-direction: column; box-shadow: 0 -5px 15px rgba(0,0,0,0.2);
            transition: transform 0.3s ease-in-out;
        }
        .comments-header { padding: 15px; border-bottom: 1px solid var(--border); text-align: center; font-weight: 600; cursor: pointer; }
        .comments-list { flex: 1; overflow-y: auto; padding: 15px; }
        .comment-item { margin-bottom: 12px; font-size: 14px; line-height: 1.4; }
        .comment-input-area { padding: 10px 15px; border-top: 1px solid var(--border); display: flex; gap: 10px; align-items: center; margin-bottom: 10px; }
        .comment-input-area input { flex: 1; border: none; outline: none; font-size: 14px; }
        .post-comment-btn { color: var(--insta-blue); font-weight: 600; cursor: pointer; background: none; border: none; }

        /* --- SEARCH GRID --- */
        .search-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 2px; }
        .search-grid img { width: 100%; height: 124px; object-fit: cover; cursor: pointer; }

        /* --- REELS --- */
        .reels-container { height: 100%; background: #000; position: relative; }
        .reel-video { width: 100%; height: 100%; object-fit: cover; }
        .reel-overlay { position: absolute; bottom: 20px; left: 15px; color: white; z-index: 10; font-size: 14px; }
        .reel-side-actions { position: absolute; right: 10px; bottom: 60px; display: flex; flex-direction: column; gap: 18px; color: white; align-items: center; z-index: 10; }
        .reel-btn { display: flex; flex-direction: column; align-items: center; font-size: 12px; gap: 4px; }

        /* --- PROFILE --- */
        .profile-info { padding: 20px 15px; }
        .profile-top { display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px; }
        .profile-top img { width: 77px; height: 77px; border-radius: 50%; border: 1px solid #dbdbdb; }
        .stats { display: flex; gap: 20px; text-align: center; font-size: 14px; }
        .stats b { display: block; font-size: 16px; }
        .edit-btn { width: 100%; padding: 7px; background: #efefef; border: none; border-radius: 8px; font-weight: 600; margin-bottom: 20px; }
    </style>
</head>
<body>

<div class="phone-container">

    <div class="login-container" id="loginPage">
        <div class="login-logo">Instagram</div>
        <div class="input-group"><input type="text" id="usernameInput" placeholder="Username"></div>
        <div class="input-group"><input type="password" id="passwordInput" placeholder="Password"></div>
        <button class="login-btn" onclick="login()">Log In</button>
    </div>

    <div id="app" class="hidden" style="display: flex; flex-direction: column; height: 100%;">
        
        <div class="navbar" id="topNav">
            <div style="font-size: 22px; font-weight: bold; font-style: italic;">Instagram</div>
            <div style="display: flex; gap: 18px;">
                <i data-lucide="heart"></i>
                <i data-lucide="message-circle"></i>
            </div>
        </div>

        <div class="main-content" id="scrollContent">
            
            <div id="homePage">
                <div class="story-bar">
                    <div class="story-ring"><img src="https://i.pravatar.cc/150?u=1"></div>
                    <div class="story-ring"><img src="https://i.pravatar.cc/150?u=2"></div>
                    <div class="story-ring"><img src="https://i.pravatar.cc/150?u=3"></div>
                    <div class="story-ring"><img src="https://i.pravatar.cc/150?u=4"></div>
                    <div class="story-ring"><img src="https://i.pravatar.cc/150?u=5"></div>
                </div>
                <div class="post">
                    <div class="post-header"><img src="https://i.pravatar.cc/150?u=9"><span>travel_bug</span></div>
                    <img src="https://picsum.photos/400/500?random=11" class="post-img" ondblclick="likePost('l1')">
                    <div class="post-actions">
                        <i data-lucide="heart" id="l1" onclick="likePost('l1')"></i>
                        <i data-lucide="message-circle" onclick="toggleComments()"></i>
                        <i data-lucide="send"></i>
                    </div>
                    <div class="post-info">
                        <b>1,402 likes</b><br>
                        <b>travel_bug</b> Dreaming of this place... âœ¨
                    </div>
                    <div class="view-comments-btn" onclick="toggleComments()">View all 14 comments</div>
                </div>
            </div>

            <div id="searchPage" class="hidden">
                <div style="padding: 10px;"><input type="text" placeholder="Search" style="width:100%; padding:8px; border-radius:10px; border:none; background:#efefef;"></div>
                <div class="search-grid" id="searchGrid"></div>
            </div>

            <div id="reelsPage" class="hidden" style="height: 100%;">
                <div class="reels-container" onclick="nextReel()">
                    <video id="mainReel" class="reel-video" loop muted src="https://assets.mixkit.co/videos/preview/mixkit-girl-in-neon-light-1282-large.mp4"></video>
                    <div class="reel-overlay">
                        <b id="reelUser">@creative_mind</b><br>
                        <span id="reelCap">Testing the new camera lens! #vlog #reels</span>
                    </div>
                    <div class="reel-side-actions">
                        <div class="reel-btn"><i data-lucide="heart"></i><span>Likes</span></div>
                        <div class="reel-btn" onclick="toggleComments()"><i data-lucide="message-circle"></i><span>24</span></div>
                        <div class="reel-btn"><i data-lucide="send"></i></div>
                        <div class="reel-btn"><i data-lucide="more-vertical"></i></div>
                    </div>
                </div>
            </div>

            <div id="profilePage" class="hidden">
                <div class="profile-info">
                    <div class="profile-top">
                        <img src="https://i.pravatar.cc/150?u=tiya">
                        <div class="stats">
                            <div><b>12</b><span>Posts</span></div>
                            <div><b>850</b><span>Followers</span></div>
                            <div><b>430</b><span>Following</span></div>
                        </div>
                    </div>
                    <b id="profName">Tiya Smith</b>
                    <p style="font-size: 14px; margin: 5px 0;">Digital Creator | Coffee Enthusiast â˜•</p>
                    <button class="edit-btn">Edit Profile</button>
                </div>
                <div class="search-grid" id="profileGrid"></div>
            </div>
        </div>

        <div id="commentSection" class="comments-overlay hidden">
            <div class="comments-header" onclick="toggleComments()">
                <div style="width: 40px; height: 4px; background: #dbdbdb; border-radius: 2px; margin: 0 auto 10px;"></div>
                Comments
            </div>
            <div class="comments-list" id="commentsList">
                <div class="comment-item"><b>travel_bug</b> This was taken in Bali!</div>
                <div class="comment-item"><b>wanderlust</b> Wow, the colors are amazing.</div>
            </div>
            <div class="comment-input-area">
                <img src="https://i.pravatar.cc/150?u=tiya" style="width: 30px; height: 30px; border-radius: 50%;">
                <input type="text" id="newCommentInput" placeholder="Add a comment...">
                <button class="post-comment-btn" onclick="addComment()">Post</button>
            </div>
        </div>

        <div class="bottom-nav">
            <i data-lucide="home" onclick="showPage('homePage')"></i>
            <i data-lucide="search" onclick="showPage('searchPage')"></i>
            <i data-lucide="plus-square"></i>
            <i data-lucide="clapperboard" onclick="showPage('reelsPage')"></i>
            <i data-lucide="user" onclick="showPage('profilePage')"></i>
        </div>
    </div>
</div>

<script>
    lucide.createIcons();

    const reelData = [
        { src: "https://assets.mixkit.co/videos/preview/mixkit-girl-in-neon-light-1282-large.mp4", user: "@neon_dreams", cap: "City lights... ðŸŒƒ" },
        { src: "https://assets.mixkit.co/videos/preview/mixkit-tree-with-yellow-flowers-1173-large.mp4", user: "@nature_lover", cap: "Spring is here! ðŸŒ¼" },
        { src: "https://assets.mixkit.co/videos/preview/mixkit-woman-running-on-the-beach-1446-large.mp4", user: "@fitness_daily", cap: "Morning cardio sessions ðŸƒâ€â™€ï¸" }
    ];
    let currentReelIdx = 0;

    function login() {
        const u = document.getElementById("usernameInput").value || "Tiya Smith";
        document.getElementById("profName").innerText = u;
        document.getElementById("loginPage").classList.add("hidden");
        document.getElementById("app").classList.remove("hidden");
        initGrids();
    }

    function initGrids() {
        const grids = ['searchGrid', 'profileGrid'];
        grids.forEach(id => {
            const el = document.getElementById(id);
            el.innerHTML = "";
            for(let i=0; i<12; i++) {
                const img = document.createElement('img');
                img.src = `https://picsum.photos/200?sig=${id + i}`;
                el.appendChild(img);
            }
        });
    }

    function showPage(pageId) {
        const pages = ['homePage', 'searchPage', 'reelsPage', 'profilePage'];
        pages.forEach(p => document.getElementById(p).classList.add("hidden"));
        document.getElementById(pageId).classList.remove("hidden");
        
        // Close comments if switching pages
        document.getElementById("commentSection").classList.add("hidden");

        const topNav = document.getElementById("topNav");
        const video = document.getElementById("mainReel");
        
        if(pageId === 'reelsPage') {
            topNav.classList.add("hidden");
            video.play();
        } else {
            topNav.classList.remove("hidden");
            video.pause();
        }
    }

    function nextReel() {
        currentReelIdx = (currentReelIdx + 1) % reelData.length;
        const video = document.getElementById("mainReel");
        video.src = reelData[currentReelIdx].src;
        document.getElementById("reelUser").innerText = reelData[currentReelIdx].user;
        document.getElementById("reelCap").innerText = reelData[currentReelIdx].cap;
        video.play();
    }

    function likePost(id) {
        document.getElementById(id).classList.toggle("heart-active");
    }

    /* COMMENT LOGIC */
    function toggleComments() {
        const section = document.getElementById("commentSection");
        section.classList.toggle("hidden");
    }

    function addComment() {
        const input = document.getElementById("newCommentInput");
        const list = document.getElementById("commentsList");
        const username = document.getElementById("profName").innerText;

        if (input.value.trim() !== "") {
            const commentDiv = document.createElement("div");
            commentDiv.className = "comment-item";
            commentDiv.innerHTML = `<b>${username}</b> ${input.value}`;
            list.appendChild(commentDiv);
            input.value = "";
            list.scrollTop = list.scrollHeight;
        }
    }

    // Allow Enter key to post
    document.getElementById("newCommentInput").addEventListener("keypress", function (e) {
        if (e.key === "Enter") addComment();
    });
</script>

</body>
</html>
